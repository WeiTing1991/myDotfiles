" .ideavimrc is a configuration file for IdeaVim plugin. It uses
"   the same commands as the original .vimrc configuration.
" You can find a list of commands here: https://jb.gg/h38q75
" Find more examples here: https://jb.gg/share-ideavimrc


"" -- Suggested options --
" Show a few lines of context around the cursor. Note that this makes the
" text scroll if you mouse-click near the start or end of the window.
set scrolloff=8

" Do incremental searching.
set incsearch
set hlsearch
set ignorecase
set smartcase
set number
set relativenumber
set visualbell
set ideajoin
set idearefactormode=keep
set clipboard+=unnamed

let mapleader=" "

" ── sethandler (claim Ctrl keys for Vim) ─────────────────────
sethandler <C-A> a:vim
sethandler <C-B> a:vim
sethandler <C-D> a:vim
sethandler <C-E> a:ide
sethandler <C-F> a:vim
sethandler <C-H> a:vim
sethandler <C-I> a:vim
sethandler <C-J> a:vim
sethandler <C-K> a:vim
sethandler <C-L> a:vim
sethandler <C-M> a:vim
sethandler <C-N> a:vim
sethandler <C-O> a:vim
sethandler <C-P> a:vim
sethandler <C-R> a:vim
sethandler <C-S> a:vim
sethandler <C-T> a:vim
sethandler <C-U> a:vim
sethandler <C-W> a:vim
sethandler <C-X> a:vim
sethandler <C-Y> a:vim
sethandler <C-[> a:vim
sethandler <C-]> a:vim
sethandler <C-\> a:vim

sethandler <C-C> i:vim n-x-v:ide
sethandler <C-V> i:vim n-x-v:ide


" Don't use Ex mode, use Q for formatting.
map Q gq

" --- Enable IdeaVim plugins https://jb.gg/ideavim-plugins

" ── Plugins ──────────────────────────────────────────────────
" Highlight copied text
Plug 'machakann/vim-highlightedyank'
" Commentary plugin
Plug 'tpope/vim-commentary'
Plug 'tpope/vim-surround'
Plug 'preservim/nerdtree'

" set sneak
" set which-key
" set notimeout
set nerdtree

" ── Navigation ───────────────────────────────────────────────
map <C-h> <C-w>h
map <C-l> <C-w>l
map <C-j> <C-w>j
map <C-k> <C-w>k

nmap <C-d> <C-d>zz
nmap <C-u> <C-u>zz
nmap n nzzzv
nmap N Nzzz
nmap <Esc> :nohlsearch<CR>


" ── Better escape ────────────────────────────────────────────
imap jk <Esc>
imap kj <Esc>

" ── Yank to end of line ──────────────────────────────────────
nmap Y y$

" ── Move lines in visual mode ────────────────────────────────
vmap J :m '>+1<CR>gv=gv
vmap K :m '<-2<CR>gv=gv

" ── Keep visual selection after indent ───────────────────────
vmap < <gv
vmap > >gv

" ── Don't overwrite register on paste in visual ──────────────
vmap p "_dP

" Sync IDE bookmarks with Vim marksset ideastatusicon=gray  " Cleaner status bar iconset clipboard+=ideaput
" set ideamarks

"" -- Map IDE actions to IdeaVim -- https://jb.gg/abva4t
"" Map \r to the Reformat Code action
"map \r <Action>(ReformatCode)

"" Map <leader>d to start debug
"map <leader>d <Action>(Debug)

"" Map \b to toggle the breakpoint on the current line
"map \b <Action>(ToggleLineBreakpoint)

nmap <leader>o <Action>(NextTab)
nmap <leader>i <Action>(PreviousTab)

nmap <C-w>5 <Action>(SplitHorizontally)
nmap <C-w>' <Action>(SplitVertically)

nmap <leader>. <Action>(ReformatCode)
nmap g. <Action>(ShowIntentionActions)

nmap <leader>' <Action>(MaximizeEditorInSplit)

nmap <C-b> <Action>(BuildSolutionAction)
nmap <C-q> <Action>(CloseContent)

" nmap <leader>rn <Action>(RenameElement)
" nmap <leader>rf <Action>(Refactorings.QuickListPopupAction)
" nmap <leader>fm <Action>(ReformatCode)
" nmap <leader>oi <Action>(OptimizeImports)

nmap gd <Action>(GotoDeclaration)
nmap gi <Action>(GotoImplementation)
nmap K <Action>(QuickJavaDoc)

" nmap gu <Action>(ShowUsages)
" nmap ge <Action>(GotoNextError)
" nmap gE <Action>(GotoPreviousError)
