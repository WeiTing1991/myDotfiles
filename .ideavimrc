" .ideavimrc is a configuration file for IdeaVim plugin. It uses
"   the same commands as the original .vimrc configuration.
" You can find a list of commands here: https://jb.gg/h38q75
" Find more examples here: https://jb.gg/share-ideavimrc


"" -- Suggested options --
" ── Core settings ────────────────────────────────────────────
set scrolloff=10             " keep 8 lines visible above/below cursor
set sidescrolloff=5          " keep 5 columns visible left/right of cursor
set incsearch                " show matches as you type search pattern
set hlsearch                 " highlight all search matches
set ignorecase               " case-insensitive search...
set smartcase                " ...unless you type uppercase letters
set number                   " show line numbers
set relativenumber           " relative line numbers (for easy j/k jumps)
set visualbell               " flash screen instead of beeping
set showmode                 " show current mode (NORMAL/INSERT/etc)

" IdeaVim-specific settings
set ideajoin                 " use IntelliJ's smart join (J) instead of Vim's
set idearefactormode=keep    " stay in current mode during refactoring
set clipboard+=unnamed       " yank/paste uses system clipboard
set clipboard+=ideaput       " use IntelliJ's paste for better formatting
set ideastatusicon=gray      " subtle status bar icon

let mapleader=" "            " Space as leader key

" ── sethandler (claim Ctrl keys for Vim) ─────────────────────
sethandler <C-A> a:vim
sethandler <C-B> a:vim
sethandler <C-D> a:vim
sethandler <C-E> a:ide

sethandler <C-F> a:ide

sethandler <C-H> a:vim
sethandler <C-I> a:vim
sethandler <C-J> a:vim
sethandler <C-K> a:vim
sethandler <C-L> a:vim
sethandler <C-M> a:vim
sethandler <C-N> a:vim
sethandler <C-O> a:vim
sethandler <C-P> a:ide
sethandler <C-R> a:vim
sethandler <C-S> a:vim
sethandler <C-T> a:vim
sethandler <C-U> a:vim
sethandler <C-W> a:vim
sethandler <C-X> a:vim
sethandler <C-Y> a:vim
sethandler <C-[> a:vim
sethandler <C-]> a:vim
sethandler <C-\> a:vim
sethandler <C-/> a:vim

sethandler <C-C> i:ide n-x-v:vim
sethandler <C-V> i:ide n-x-v:vim


" Don't use Ex mode, use Q for formatting.
" map Q gq

" --- Enable IdeaVim plugins https://jb.gg/ideavim-plugins

" ── Plugins ──────────────────────────────────────────────────
Plug 'machakann/vim-highlightedyank'
set highlightedyank
let g:highlightedyank_highlight_duration = "100"

Plug 'tpope/vim-commentary'
Plug 'tpope/vim-surround'
Plug 'preservim/nerdtree'

" set sneak
" set which-key
" set notimeout
set nerdtree
set ReplaceWithRegister

" ── Navigation ───────────────────────────────────────────────
map <C-h> <C-w>h
map <C-l> <C-w>l
map <C-j> <C-w>j
map <C-k> <C-w>k

nmap <C-d> <C-d>zz
nmap <C-u> <C-u>zz
nmap n nzzzv
nmap N Nzzz
nmap <Esc> :nohlsearch<CR>
nmap <C-C> <Esc>

nmap <C-/> gcc
vmap <C-/> <Action>(CommentByLineComment)


" ── Better escape ────────────────────────────────────────────
imap jk <Esc>
imap kj <Esc>

" ── Yank to end of line ──────────────────────────────────────
nmap Y y$

" ── Move lines in visual mode ────────────────────────────────
vmap J :m '>+1<CR>gv=gv
vmap K :m '<-2<CR>gv=gv

" ── Keep visual selection after indent ───────────────────────
vmap < <gv
vmap > >gv

" ── Don't overwrite register on paste in visual ──────────────
vmap p "_dP

" Sync IDE bookmarks with Vim marksset ideastatusicon=gray  " Cleaner status bar iconset clipboard+=ideaput
" set ideamarks

"" -- Map IDE actions to IdeaVim -- https://jb.gg/abva4t
"" Map \r to the Reformat Code action
"map \r <Action>(ReformatCode)

"" Map <leader>d to start debug
"map <leader>d <Action>(Debug)

"" Map \b to toggle the breakpoint on the current line
"map \b <Action>(ToggleLineBreakpoint)

nmap <leader>o <Action>(NextTab)
nmap <leader>i <Action>(PreviousTab)

nmap <C-w>5 <Action>(SplitHorizontally)
nmap <C-w>' <Action>(SplitVertically)

nmap <leader>. <Action>(ReformatCode)
nmap g. <Action>(ShowIntentionActions)

nmap <leader>' <Action>(MaximizeEditorInSplit)

nmap <C-Q> <Action>(CloseContent)

" nmap <leader>rn <Action>(RenameElement)
" nmap <leader>rf <Action>(Refactorings.QuickListPopupAction)
" nmap <leader>fm <Action>(ReformatCode)
" nmap <leader>oi <Action>(OptimizeImports)

" ── LSP / Go-to ──────────────────────────────────────────────
nmap gd <Action>(GotoDeclaration)
"   gd → go to where this symbol is defined
nmap gi <Action>(GotoImplementation)
"   gi → go to implementation (e.g. from interface to concrete class)
nmap gy <Action>(GotoTypeDeclaration)
"   gy → go to the TYPE of the variable (e.g. on a variable, jump to its class)
nmap gr <Action>(ShowUsages)
"   gr → show all places where this symbol is used (popup list)
nmap gR <Action>(FindUsages)

nmap gU <Action>(GotoSuperMethod)
"   gU → go to parent/super class method (e.g. overridden method → base)
nmap K <Action>(QuickJavaDoc)
"   K → show documentation popup for symbol under cursor

nmap gh <Action>(GotoDeclaration)

nmap gO <Action>(FileStructurePopup)
nmap go <Action>(ActivateStructureToolWindow)
nmap gW <Action>(GotoSymbol)

nmap <leader>fl <Action>(FindInPath)
" nmap <leader>fg <Action>(Find)
nmap <leader><leader> <Action>(Switcher)

nmap <leader>j <Action>(HideAllWindows)

nmap <leader>tc <Action>(ToggleInlineCompletionAction)
nmap <leader>th <Action>(ToggleInlayHintsGloballyAction)

nmap <leader>gb <Action>(Annotate)
nmap <leader>go <Action>(Github.Open.In.Browser)
nmap <leader>gg <Action>(Vcs.QuickListPopupAction)

nmap <leader>rr <Action>(Run)
nmap <leader>rb <Action>(Debug)
"nmap <leader>rs <Action>(Stop)
"nmap <leader>rb <Action>(BuildSolutionAction)
"nmap <leader>rc <Action>(ChooseRunConfiguration)
"nmap <leader>re <Action>(EditRunConfigurations)
