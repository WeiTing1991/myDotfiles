" ============================================================================
" .vsvimrc for Visual Studio (MERGED)
" ============================================================================

let mapleader = " "

" ============================================================================
" BASIC SETTINGS
" ============================================================================
set ignorecase
set smartcase
set incsearch
set hlsearch
set number
set relativenumber
set clipboard=unnamed
set scrolloff=5
set backspace=indent,eol,start

" ============================================================================
" ESCAPE & CLEAR SEARCH
" ============================================================================
" [FIXED] Removed duplicate <Esc> mappings - kept one
" nnoremap <Esc> :noh<CR><Esc>
nnoremap <C-c> <Esc>:noh<CR>

inoremap jk <Esc>
inoremap kj <Esc>

" ============================================================================
" SCROLLING & CENTERING
" ============================================================================
nnoremap <C-d> <C-d>zz
nnoremap <C-u> <C-u>zz
nnoremap G Gzz
nnoremap n nzzzv
nnoremap N Nzzzv

" ============================================================================
" FILE NAVIGATION
" ============================================================================
nnoremap <C-p> :vsc Edit.GoToAll<CR>
nnoremap <C-S-p> :vsc Edit.GoToFile<CR>
nnoremap <leader>f :vsc Edit.GoToFile<CR>
nnoremap <leader>s :vsc Edit.GoToSymbol<CR>
nnoremap gO :vsc Edit.GoToSymbol<CR>

" ============================================================================
" WINDOW / TAB MANAGEMENT
" ============================================================================
" Split windows
nnoremap <C-w>' :vsc Window.NewVerticalTabGroup<CR>
nnoremap <C-w>v :vsc Window.NewVerticalTabGroup<CR>
nnoremap <C-w>5 <C-w>s
nnoremap <C-w>s :vsc Window.NewHorizontalTabGroup<CR>

" [CHANGED] Tab navigation - using leader to preserve C-o/C-i for jump list
" Your original: <C-o>/<C-i> for tabs (overwrites vim jump list!)
" New: <leader>o/<leader>i for tabs, C-o/C-i for navigation
nnoremap <leader>o :vsc Window.NextTab<CR>
nnoremap <leader>i :vsc Window.PreviousTab<CR>
nnoremap <Tab> :vsc Window.NextTab<CR>
nnoremap <S-Tab> :vsc Window.PreviousTab<CR>

" Jump list navigation (vim default behavior)
nnoremap <C-o> :vsc View.NavigateBackward<CR>
nnoremap <C-i> :vsc View.NavigateForward<CR>

" Window navigation
nnoremap <C-k> <C-w>k
nnoremap <C-j> <C-w>j
nnoremap <C-h> <C-w>h
nnoremap <C-l> <C-w>l
nnoremap <C-k> :vsc Window.MoveToPreviousTabGroup<CR>


" Close
nnoremap <C-q> :vsc Window.CloseDocumentWindow<CR>
" nnoremap <leader>q :vsc File.Close<CR>
" nnoremap <leader>w :vsc Window.CloseDocumentWindow<CR>

" ============================================================================
" VIEWS / PANELS
" ============================================================================
" [FIXED] You had duplicate <C-e> mappings - split into two keys
nnoremap <C-e> :vsc View.SolutionExplorer<CR>
nnoremap <leader>e :vsc SolutionExplorer.SyncWithActiveDocument<CR>

nnoremap <leader>h :vsc Window.HideShowAllToolWindows<CR>
nnoremap <C-`> :vsc View.Terminal<CR>
nnoremap <C-S-m> :vsc View.ErrorList<CR>
" use f8 and shift-f8


" ============================================================================
" LSP / CODE NAVIGATION
" ============================================================================
nnoremap gd :vsc Edit.GoToDefinition<CR>
nnoremap gD :vsc Edit.PeekDefinition<CR>
nnoremap gI :vsc Edit.GoToImplementation<CR>
nnoremap gi :vsc Edit.GoToDeclaration<CR>
nnoremap gr :vsc Edit.FindAllReferences<CR>
nnoremap K :vsc Edit.QuickInfo<CR>
nnoremap gh :vsc EditorContextMenus.CodeWindow.ToggleHeaderCodeFile<CR>



" ============================================================================
" CODE ACTIONS / REFACTORING
" ============================================================================
nnoremap g. :vsc View.QuickActions<CR>
nnoremap <F2> :vsc Refactor.Rename<CR>

" ============================================================================
" FORMATTING
" ============================================================================

nnoremap <leader>. :vsc Edit.FormatDocument<CR>
vnoremap <leader>= :vsc Edit.FormatSelection<CR>

" ============================================================================
" COMMENTING
" ============================================================================
nnoremap gcc :vsc Edit.ToggleLineComment<CR>
vnoremap <C-/> :vsc Edit.ToggleLineComment<CR>



" ============================================================================
" LINE OPERATIONS
" ============================================================================
" Join lines (preserve cursor position)
nnoremap J mzJ`z

" Move lines (visual mode)
vnoremap J :m '>+1<CR>gv=gv
vnoremap K :m '<-2<CR>gv=gv

" Move lines (normal mode) - Alt+j/k
nnoremap <A-j> :vsc Edit.MoveSelectedLinesDown<CR>
nnoremap <A-k> :vsc Edit.MoveSelectedLinesUp<CR>
vnoremap <A-j> :vsc Edit.MoveSelectedLinesDown<CR>
vnoremap <A-k> :vsc Edit.MoveSelectedLinesUp<CR>


" ============================================================================
" INDENTATION (keep selection)
" ============================================================================
vnoremap < <gv
vnoremap > >gv

" ============================================================================
" SEARCH
" ============================================================================
" nnoremap <leader>/ :vsc Edit.FindinFiles<CR>
nnoremap <leader>s :vsc Edit.ReplaceinFiles<CR>


" ============================================================================
" BUILD & DEBUG
" ============================================================================
" nnoremap <leader>b :vsc Build.BuildSolution<CR>
" nnoremap <leader>db :vsc Debug.ToggleBreakpoint<CR>
nnoremap <F5> :vsc Debug.Start<CR>
nnoremap <F9> :vsc Debug.ToggleBreakpoint<CR>

" ============================================================================
" GIT
" ============================================================================
nnoremap <leader>gg :vsc Team.Git.GoToGitChanges<CR>
" nnoremap <leader>gc :vsc Team.Git.Commit<CR>

" ============================================================================
" SAVE
" ============================================================================
nnoremap <C-s> :vsc File.SaveSelectedItems<CR>
" nnoremap <leader>fs :vsc File.SaveAll<CR>